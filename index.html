<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>Parcelninja PWA</title>
  <meta name="description" content="Testing PWA">
  <meta name="author" content="David Thompson">

  
  
  <script>
    function playSound() {
      var snd = new Audio("siren.wav"); // buffers automatically when created
      snd.play();
    }

    function canVibrate() {
      if ("vibrate" in navigator) {
        return true;
      }
      return false;
    }

    function vibrate(timeMs) {
      navigator.vibrate(timeMs);
    }

  </script>
</head>

<body>
  <h1>Testing PWA's</h1>

    <button id="sound" style="height: 50px; width: 250px;" onclick="playSound();">Play Sound</button>
    <button id="vibrate" style="height: 50px; width: 250px;" onclick="vibrate(250);" disabled="disabled">Vibrate</button>
    <button id="capture" style="height: 50px; width: 250px;">Capture Image</button>

    <br/>
    <video id="player" controls autoplay></video>
    
    <canvas id="canvas" width=320 height=240></canvas>

    <div id="errors">
      Errors...
    </div>

    <small>1.3</small>
    
    <script>
        window.onerror = function(e) {
          document.getElementById('errors').innerHTML += e.toString() + "<br/><br/>";
        }
      </script>

    <script>
      const player = document.getElementById('player');
      const canvas = document.getElementById('canvas');
      const context = canvas.getContext('2d');
      const captureButton = document.getElementById('capture');
    
      const constraints = {
        video: true,
      };
    
      captureButton.addEventListener('click', () => {
        // Draw the video frame to the canvas.
        context.drawImage(player, 0, 0, canvas.width, canvas.height);
      });
    
      // Attach the video stream to the video element and autoplay.
      navigator.mediaDevices.getUserMedia(constraints)
        .then((stream) => {
          player.srcObject = stream;
        });
    </script>

  <script src="pwabuilder-sw-register.js"></script>
  <script src="pwabuilder-sw.js?v=1"></script>
  <script>
    (function(){
      if (canVibrate()) {
        document.getElementById('vibrate').disabled = false; 
      }
    })();
  </script>
</body>
</html>